name: Mercury Receipts

on:
  schedule:
    # Run at 9:00 AM UTC+8 (1:00 AM UTC) every day
    - cron: '0 1 * * *'
  workflow_dispatch:

jobs:
  run-mercury-receipts:
    runs-on: ubuntu-latest
    steps:
      - name: Run Mercury Receipts Agent
        uses: vm0-ai/run-action@v1
        with:
          agent: mercury-receipts
          prompt: "do the job"
          silent: true
          artifact-name: mercury-receipts-output
          vm0-token: ${{ secrets.VM0_TOKEN }}
          secrets: |
            CLAUDE_CODE_OAUTH_TOKEN=${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
            MERCURY_API_TOKEN=${{ secrets.MERCURY_API_TOKEN }}
            GMAIL_CLIENT_SECRET=${{ secrets.GMAIL_CLIENT_SECRET }}
            GMAIL_REFRESH_TOKEN=${{ secrets.GMAIL_REFRESH_TOKEN }}
            SLACK_BOT_TOKEN=${{ secrets.SLACK_BOT_TOKEN }}
          vars: |
            GMAIL_CLIENT_ID=${{ vars.GMAIL_CLIENT_ID }}
